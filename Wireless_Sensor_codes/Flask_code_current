from flask import Flask, request, jsonify

app = Flask(__name__)

# Store latest data from BME688 and motion sensor
latest_data = {
    "BME688": {"temperature": None, "humidity": None, "pressure": None, "gas_resistance": None},
    "motion": "no motion"
}

# Endpoint for receiving motion data
@app.route('/motion-data', methods=['POST'])
def receive_motion_data():
    data = request.get_json()
    latest_data["motion"] = data.get("motion")
    print("Received Motion Data:", latest_data["motion"])
    return jsonify({"status": "success"})

# Endpoint to retrieve latest data from both sensors
@app.route('/latest-data', methods=['GET'])
def get_latest_data():
    return jsonify(latest_data)

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
